#!/bin/bash

echo "ğŸš€ PostBuild: Simple LDaCA setup"

# Create directories and files needed
mkdir -p /home/jovyan/work/logs
touch /home/jovyan/work/logs/ldaca-startup.log

# Create a marker that LDaCA should start
touch /home/jovyan/.ldaca-start-marker

# Make sure the service script is executable (if it exists)
if [ -f "/usr/local/bin/start-ldaca-services.sh" ]; then
    chmod +x /usr/local/bin/start-ldaca-services.sh
fi

echo "âœ… PostBuild: Setup complete"
exit 0h
set -e

echo "ï¿½ PostBuild: Setting up LDaCA for BinderHub"

# Start the LDaCA services in background
echo "ğŸ”„ Starting LDaCA services launcher..."
/usr/local/bin/start-ldaca-services.sh &

echo "âœ… PostBuild: LDaCA service launcher started in background"
echo "ï¿½ Services will be available in ~15 seconds after Jupyter starts"
echo "ğŸŒ Check /tmp/ldaca-startup.log for service status"
